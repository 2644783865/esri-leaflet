<!DOCTYPE html>
<html>

<head>
  <meta charset=utf-8 />
  <title>Esri Leaflet Debugging Sample</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- Load Leaflet -->
  <link rel="stylesheet" href="../node_modules/leaflet/dist/leaflet.css" />
  <script src="../node_modules/leaflet/dist/leaflet-src.js"></script>

  <!-- Load Esri Leaflet from source-->
  <script src="../dist/esri-leaflet-debug.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
    }

    #info-pane {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 1000;
      padding: 1em;
      background: white;
    }
  </style>
</head>

<body>

  <div id="map"></div>
  <div id="info-pane" class="leaflet-bar">
    <label>
      sample application for debugging a <pre>L.esri.imageMapLayer</pre>
    </label>
  </div>

  <script>
    /*
    make a copy of this file in the same folder if you'd like git to ignore your local changes
    */
    var map = L.map('map').setView([43.65, -79.38], 12);
    L.esri.basemapLayer('Topographic').addTo(map);

    L.esri.imageMapLayer({
      url: 'https://sampleserver6.arcgisonline.com/arcgis/rest/services/Toronto/ImageServer',
      opacity: 0.7,
      
      // to test with a token, create one at the same server as used in the url param above, i.e.
      // https://sampleserver6.arcgisonline.com/arcgis/tokens/
      // and for the HTTP referer value you can use the local dev sever URL
      // an example user/pass for the same server is available at https://esri.github.io/esri-leaflet/examples/arcgis-server-auth.html
      
      // token: 'paste in here',
      
      f: 'image' // or test optional 'json'
    })
      .bindPopup(function (error, identifyResults) {
        // to help test the identify task
        if (error || !identifyResults.pixel) {
          return false;
        } else {
          return 'Pixel values: ' + identifyResults.pixel.properties.value + ' (B, G, R, NIR)';
        }
      })
      .addTo(map);
  </script>

</body>

</html>